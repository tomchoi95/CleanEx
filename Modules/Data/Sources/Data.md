# Data Layer

## 역할
데이터 레이어는 도메인 레이어에서 정의한 인터페이스의 실제 구현을 제공하는 계층입니다. 이 계층은 데이터의 영속성과 접근성을 관리하며, 도메인 계층과 실제 데이터 저장소 사이의 중간 다리 역할을 합니다.

## 구조
데이터 레이어는 다음과 같은 구성 요소로 이루어져 있습니다:

### 1. Models
- 데이터 전송을 위한 객체들을 정의
- 도메인 모델과 데이터 모델 간의 변환을 담당
- DTO(Data Transfer Object)와 로컬 데이터 모델 포함
- 예: `TodoDTO.swift`, `TodoLocalModel.swift`

### 2. DataSources
- 실제 데이터 저장소와의 통신을 담당
- 로컬 데이터 소스와 원격 데이터 소스로 구분
- 예: `TodoLocalDataSource.swift`

### 3. Repositories
- 도메인 레이어의 Repository 인터페이스 구현
- DataSource를 사용하여 실제 데이터 접근
- 예: `TodoRepositoryImpl.swift`

## 주요 특징
1. **데이터 변환**
   - DTO와 도메인 모델 간의 변환
   - 데이터 저장소에 맞는 형식으로 데이터 변환

2. **에러 처리**
   - 네트워크 오류
   - 데이터베이스 오류
   - 데이터 변환 오류

3. **비동기 처리**
   - 모든 작업은 비동기로 처리
   - `async/await` 사용

4. **캐싱 전략**
   - 로컬 데이터 캐싱
   - 원격 데이터 캐싱
   - 데이터 동기화

## 구현 시 고려사항
1. **인터페이스 분리**
   - 각 데이터 소스는 독립적인 인터페이스 가짐
   - 구현체는 인터페이스에 의존

2. **의존성 주입**
   - 데이터 소스는 외부에서 주입
   - 테스트 용이성 확보

3. **에러 처리**
   - 명확한 에러 타입 정의
   - 에러 전파 체계 수립

4. **성능 최적화**
   - 적절한 캐싱 전략
   - 데이터 접근 최적화

## 데이터 흐름
1. **도메인 레이어 요청**
   - UseCase가 Repository 인터페이스를 통해 데이터 요청

2. **Repository 구현체 처리**
   - RepositoryImpl이 요청을 받아 적절한 DataSource 사용

3. **DataSource 처리**
   - DataSource가 실제 데이터 저장소와 통신
   - 데이터 변환 및 에러 처리

4. **응답 반환**
   - 변환된 데이터를 도메인 모델로 변환하여 반환 